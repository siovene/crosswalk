<html>
    <head>
        <title>
            Crosswalk Iotivity Demo
        </title>
    </head>

    <body>
        <h1>Crosswalk Iotivity Demo</h1>

        <script type="text/javascript">
            var e = new xwalk.experimental.iotivity.IotivityEleven();
            var doResourceCb = function() {
                console.log("doResourceCb");
            };

            var onOCDoResourceFinished = function(status) {
                console.log("OCDoResource status = " + status);

                if (status === 0) {
                    console.log("Entering main loop.");
                    setInterval(function() {
                        e.OCProcess(function(process_status) {
                            console.log("OCProcess status = " + process_status);
                        });
                    }, 2000);
                }
            };

            var onOCInitFinished = function(status) {
                console.log("OCInit status = " + status);
                if (status === 0) {
                    e.OCDoResource(
                        null, "OC_REST_DISCOVER", "/oic/res", null, null,
                        "CT_DEFAULT", "OC_HIGH_QOS", null, doResourceCb, onOCDoResourceFinished);
                }
            };
            e.OCInit(null, 0, "OC_CLIENT", onOCInitFinished);
        </script>
    </body>
</html>
